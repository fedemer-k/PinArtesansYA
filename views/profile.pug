extends layout

block content
  .container.my-5
    .row
      .col-md-4
        .card.mb-4
          .card-body.text-center
            if profileUser.imagen_perfil
              img.rounded-circle.img-fluid.mb-3(src=profileUser.imagen_perfil, alt=profileUser.nombre, style="width: 150px; height: 150px; object-fit: cover;")
            else
              img.rounded-circle.img-fluid.mb-3(src="/placeholder-user.jpg", alt=profileUser.nombre, style="width: 150px; height: 150px; object-fit: cover;")
            
            h3.card-title= profileUser.nombre
            p.text-muted= profileUser.email
            
            if profileUser.intereses
              p.card-text= profileUser.intereses
            
            .d-flex.justify-content-center.mb-3
              .px-3
                h5= imageCount
                p.text-muted Imágenes
              .px-3
                h5= albumCount
                p.text-muted Álbumes
              .px-3
                h5= followerCount
                p.text-muted Seguidores
            
            if user && user.id_usuario !== profileUser.id_usuario
              if isFollowing
                button.btn.btn-outline-primary.btn-block.unfollow-btn(data-user-id=profileUser.id_usuario) Dejar de seguir
              else
                button.btn.btn-primary.btn-block.follow-btn(data-user-id=profileUser.id_usuario) Seguir
            
            if user && user.id_usuario === profileUser.id_usuario
              a.btn.btn-outline-secondary.btn-block.mt-2(href="/settings") Editar perfil
    
    .row.mt-4
      .col-12
        ul.nav.nav-tabs.mb-4#profileTabs
          li.nav-item
            a.nav-link.active#images-tab(data-toggle="tab", href="#images") Imágenes
          li.nav-item
            a.nav-link#albums-tab(data-toggle="tab", href="#albums") Álbumes
        
        .tab-content
          .tab-pane.fade.show.active#images
            .row
              if images && images.length > 0
                each image in images
                  .col-md-4.col-sm-6.mb-4
                    .card.h-100
                      a(href=`/image/${image.id}`)
                        img.card-img-top(src=image.filename, alt=image.title)
                      .card-body
                        h5.card-title= image.title || 'Sin título'
              else
                .col-12.text-center.py-5
                  p.text-muted No hay imágenes para mostrar
          
          .tab-pane.fade#albums
            .row
              if albums && albums.length > 0
                each album in albums
                  .col-md-4.col-sm-6.mb-4
                    .card.h-100
                      a(href=`/albums/${album.id}`)
                        img.card-img-top(src=album.coverImage, alt=album.name)
                      .card-body
                        h5.card-title= album.name
                        p.card-text.text-muted #{album.imageCount} imágenes
              else
                .col-12.text-center.py-5
                  p.text-muted No hay álbumes para mostrar

block scripts
  script(src="/js/profile.js")
